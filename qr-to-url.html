<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <title>QR â†’ URL | MÃ©mento IA ENSOSP</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <!-- Style principal -->
  <link rel="stylesheet" href="style.css">

  <!-- Libs QR + Compression -->
  <script src="https://unpkg.com/pako@2.1.0/dist/pako.min.js"></script>
  <script type="module">
    import QrScanner from "https://cdn.jsdelivr.net/npm/qr-scanner@1.4.2/qr-scanner.min.js";
    window.QrScanner = QrScanner;
  </script>
</head>

<body>

  <!-- ========================================================= -->
  <!-- BARRE DE NAVIGATION -->
  <!-- ========================================================= -->
  <nav class="tabs">
    <a href="index.html" class="tab">ğŸ  Accueil</a>
    <a href="scan.html" class="tab">ğŸ“· Lecture QR</a>
    <a href="create.html" class="tab">ğŸ“ CrÃ©ation</a>
    <a class="tab active">ğŸ”— QR â†’ URL</a>
  </nav>

  <main>
    
    <!-- ========================================================= -->
    <!-- TITRE ET EXPLICATION -->
    <!-- ========================================================= -->
    <h1 class="page-title">Convertir QR Code â†’ URL cliquable</h1>

    <!-- EncadrÃ© d'information -->
    <div style="background:#e7f3ff;border-left:4px solid #001F8F;padding:12px 15px;margin-bottom:20px;border-radius:8px;">
      <strong style="display:block;margin-bottom:5px;color:#001F8F;">ğŸ’¡ Ã€ quoi Ã§a sert ?</strong>
      Cette page vous permet de transformer un QR Code dÃ©jÃ  crÃ©Ã© en lien cliquable pour vos PDF.
      Importez simplement l'image du QR Code et vous obtiendrez l'URL correspondante.
    </div>

    <!-- ========================================================= -->
    <!-- SECTION 1 : IMPORT DU QR CODE -->
    <!-- ========================================================= -->
    <section class="card">
      <h2>1. Importer votre QR Code existant</h2>

      <div style="margin-bottom:15px;">
        <label style="display:block;margin-bottom:10px;font-weight:600;">
          ğŸ“ SÃ©lectionner l'image du QR Code
        </label>
        <input 
          type="file" 
          id="qrFileInput" 
          accept="image/*" 
          style="width:100%;padding:10px;border:2px solid #ddd;border-radius:8px;cursor:pointer;"
        >
      </div>

      <!-- AperÃ§u de l'image (masquÃ© par dÃ©faut) -->
      <div id="previewContainer" style="display:none;margin-top:15px;text-align:center;">
        <p style="font-weight:600;margin-bottom:10px;">AperÃ§u :</p>
        <img 
          id="qrPreview" 
          alt="AperÃ§u du QR Code"
          style="max-width:300px;border:2px solid #ccc;border-radius:8px;"
        >
      </div>
    </section>

    <!-- ========================================================= -->
    <!-- SECTION 2 : URL GÃ‰NÃ‰RÃ‰E (masquÃ©e par dÃ©faut) -->
    <!-- ========================================================= -->
    <section class="card" id="resultSection" style="display:none;">
      <h2>2. URL cliquable gÃ©nÃ©rÃ©e âœ…</h2>

      <!-- Zone de l'URL -->
      <div style="background:#eef2ff;padding:15px;border-radius:10px;margin-bottom:15px;">
        <label style="display:block;margin-bottom:8px;font-weight:600;color:#001F8F;">
          ğŸ”— Lien Ã  utiliser dans votre PDF :
        </label>
        <input 
          id="generatedUrl" 
          type="text" 
          readonly 
          style="width:100%;padding:12px;border:2px solid #001F8F;border-radius:8px;font-size:14px;background:white;font-family:monospace;word-break:break-all;"
        >
        <button id="btnCopyUrl" class="btn-add-var" style="margin-top:10px;">
          ğŸ“‹ Copier le lien
        </button>
      </div>

      <!-- Instructions d'utilisation -->
      <div style="background:#f9f9f9;padding:15px;border-radius:10px;">
        <h3 style="margin-top:0;color:#001F8F;font-size:15px;">ğŸ“„ Comment l'utiliser dans un PDF :</h3>
        <ol style="margin:10px 0;padding-left:20px;line-height:1.8;">
          <li><strong>Word :</strong> InsÃ©rez votre image QR â†’ Clic droit â†’ Lien hypertexte â†’ Collez l'URL</li>
          <li><strong>Adobe Acrobat :</strong> Outils â†’ Modifier PDF â†’ Ajouter lien â†’ Collez l'URL</li>
          <li><strong>PowerPoint :</strong> InsÃ©rez le QR â†’ Clic droit â†’ Lien â†’ Collez l'URL</li>
        </ol>
        <p style="margin:10px 0;padding:10px;background:#fff3cd;border-radius:6px;font-size:13px;">
          <strong>ğŸ’¡ RÃ©sultat :</strong> Quand on clique sur le QR dans le PDF, la fiche s'ouvre directement dans l'application !
        </p>
      </div>

      <!-- Bouton de test -->
      <div style="margin-top:15px;text-align:center;">
        <button id="btnTestUrl" class="btn-generate" style="width:auto;padding:12px 24px;">
          ğŸ”¬ Tester le lien
        </button>
      </div>
    </section>

    <!-- ========================================================= -->
    <!-- SECTION 3 : INFORMATIONS DE LA FICHE (masquÃ©e par dÃ©faut) -->
    <!-- ========================================================= -->
    <section class="card" id="infoSection" style="display:none;">
      <h2>ğŸ“‹ Informations de la fiche</h2>
      <div id="ficheInfo" style="background:#f5f7fb;padding:15px;border-radius:8px;font-size:14px;line-height:1.8;"></div>
    </section>

  </main>

  <!-- ========================================================= -->
  <!-- SCRIPT UI -->
  <!-- ========================================================= -->
  <script type="module" src="./src/ui/uiQrToUrl.js"></script>

</body>
</html>
